(this.webpackJsonpmemeface=this.webpackJsonpmemeface||[]).push([[0],{156:function(e,t){},218:function(e,t){},323:function(e,t,n){},324:function(e,t,n){},331:function(e,t){},332:function(e,t){},340:function(e,t){},342:function(e,t){},343:function(e,t){},344:function(e,t){},345:function(e,t){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var r=n(54),a=n.n(r),c=n(261),s=n.n(c),o=n(4),i=(n(323),n(324),n(41)),u=function(e){var t=e.onChange,n=Object(r.useRef)();return Object(i.jsxs)("label",{className:"image-selector",children:[Object(i.jsx)("div",{children:"Click to select images"}),Object(i.jsx)("input",{type:"file",name:"images",multiple:!0,onChange:function(e){t(e.target.files)},ref:n})]})},l=n(19),f=n(5),p=n.n(f),j=n(11),m=(n(259),n(313)),b=n(314),g=(n(350),n(200),n(201),n(347),function(e){var t=e.progress,n=e.total,r="calc(".concat(t/n*100,"% - 4px)");return Object(i.jsxs)("div",{className:"progress-bar",children:[Object(i.jsx)("div",{className:"progress-bar__display",style:{width:r}}),Object(i.jsxs)("div",{className:"progress-bar__numbers",children:[t,"/",n]})]})}),d=(n(348),function(e){var t=e.image;return Object(i.jsx)("div",{className:"image-display",children:Object(i.jsx)("img",{src:null===t||void 0===t?void 0:t.src,className:"image-display__img"})})}),h=(n(349),n(316)),x=n(317),O=null,v=null,w=function(e){var t=e.images,n=Object(r.useRef)(),a=Object(r.useRef)(),c=Object(r.useState)(0),s=Object(o.a)(c,2),u=s[0],f=s[1],w=Object(r.useState)([]),y=Object(o.a)(w,2),_=y[0],k=y[1],N=Object(r.useState)(!0),C=Object(o.a)(N,2),S=C[0],I=C[1],R=Object(r.useState)(null),L=Object(o.a)(R,2),D=L[0],F=L[1],P=Object(r.useState)(null),U=Object(o.a)(P,2),A=U[0],M=U[1];Object(r.useEffect)((function(){f(0),k([]),I(!0),E(t)}),[t]);var B=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loading models..."),O){e.next=5;break}return e.next=4,b.a();case 4:O=e.sent;case 5:if(v){e.next=9;break}return e.next=8,m.a();case 8:v=e.sent;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:console.log("processing images..."),console.log(t),n=Array.from(t),M(null),r=0;case 7:if(!(r<n.length)){e.next=14;break}return e.next=10,Y(n[r]);case 10:f(r+1);case 11:r++,e.next=7;break;case 14:I(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src=URL.createObjectURL(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src=t.toDataURL("image/png")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.toBlob((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(p.a.mark((function e(t){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return r=e.sent,console.log(r),F(r),e.next=7,G(r);case 7:a=e.sent,console.log(a),c=p.a.mark((function e(c){var s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("remove backgroud..."),e.next=3,q(r,a[c]);case 3:return e.next=5,T(n.current);case 5:return s=e.sent,M(s),e.next=9,H(n.current);case 9:return e.next=11,z(n.current);case 11:o=e.sent,console.log(t),console.log(t.name),o.name="".concat(t.name.split(".")[0],"-f-").concat(c,".png"),console.log("processed images"),console.log(o),k((function(e){return[].concat(Object(l.a)(e),[o])}));case 18:case"end":return e.stop()}}),e)})),s=0;case 11:if(!(s<a.length)){e.next=16;break}return e.delegateYield(c(s),"t0",13);case 13:s++,e.next=11;break;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var a,c,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.current.width=r.width,n.current.height=r.height,a=r.x,c=r.y,s=r.width,o=r.height,n.current.getContext("2d").drawImage(t,a,c,s,o,0,0,n.current.width,n.current.height);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c,s,o,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.next=3,O.estimateFaces(t,false);case 3:if(n=e.sent,r=[],n.length>0)for(a=0;a<n.length;a++)c=n[a].topLeft,s=n[a].bottomRight,o=[s[0]-c[0],s[1]-c[1]],i=Math.max(c[1]-o[1]/1.3,0),u=Math.max(c[0]-o[0]/4,0),r.push({x:u,y:i,width:1.5*o[0],height:1.7*o[1]});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c,s,i,u,l,f,j,m,b,g,d,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.segmentPerson(t);case 2:for(n=e.sent,r=n.data,a=t.getContext("2d"),c=a.getImageData(0,0,t.width,t.height),s=c.data,i=a.createImageData(t.width,t.height),u=i.data,l=0;l<r.length;l++)f=[s[4*l],s[4*l+1],s[4*l+2],s[4*l+3]],j=f[0],m=f[1],b=f[2],g=f[3],d=r[l]?[j,m,b,g]:[255,255,255,0],h=Object(o.a)(d,4),u[4*l]=h[0],u[4*l+1]=h[1],u[4*l+2]=h[2],u[4*l+3]=h[3];a.putImageData(i,0,0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"image-processor",children:[Object(i.jsxs)("div",{className:"image-processor__display",children:[Object(i.jsx)("div",{className:"image-processor__display-container",children:Object(i.jsx)(d,{image:D})}),Object(i.jsx)("div",{className:"image-processor__display-container",children:Object(i.jsx)(d,{image:A})})]}),Object(i.jsx)(g,{progress:u,total:t.length}),Object(i.jsx)("button",{disabled:S,className:"image-processor__download-btn",onClick:function(){if(_&&_.length>0){for(var e=new x,t=0;t<_.length;t++)e.file(_[t].name,_[t]);e.generateAsync({type:"blob"}).then((function(e){Object(h.saveAs)(e,"memefaces.zip")})),console.log(_)}},children:"Download"}),Object(i.jsx)("div",{className:"image-processor__image-overview",children:_.map((function(e){return Object(i.jsx)("div",{className:"image-preview",children:Object(i.jsx)("img",{className:"image-preview__img",src:URL.createObjectURL(e)})})}))}),Object(i.jsx)("canvas",{className:"image-processor__canvas",ref:n}),Object(i.jsx)("canvas",{className:"image-processor__canvas",ref:a})]})};var y=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(o.a)(c,2),l=(s[0],s[1],Object(r.useState)(!1)),f=Object(o.a)(l,2),p=f[0],j=f[1];return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("div",{className:"app-container",children:[Object(i.jsx)("header",{children:Object(i.jsx)("h1",{className:"title",children:"Meme Face - Image Extractor"})}),Object(i.jsx)("div",{className:"content-area",children:p?Object(i.jsx)(w,{images:n}):Object(i.jsx)(u,{onChange:function(e){e&&0!==e.length&&(a(e),j(!0))}})})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root")),_()}},[[351,1,2]]]);
//# sourceMappingURL=main.30da658d.chunk.js.map